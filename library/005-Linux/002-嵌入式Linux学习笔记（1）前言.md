# 嵌入式Linux学习笔记（1）开篇
>作者：**80后老男孩**  
>写作时间：2021-04-05  
>本文已发表于csdn博客：[嵌入式Linux学习笔记（1）开篇](https://blog.csdn.net/weixin_41034400/article/details/115537013) 
 
[TOC]



## 前言

我本身大学阶段读的是机械专业，后来考了研究生，导师搞自动化方向，于是就转了个弯，搞起了单片机开发，用过最初的atmel和nxp的51系列，后来做产品有用过avr系列和microchip公司的pic系列，最后跟着大潮用了stm32。顺便说一句，pic系列单片机真的相当优秀，当年是行业霸主，遥遥领先，以至于国内最初起步的mcu芯片企业都是直接抄袭pic。相比于今天无孔不入的stm32，当年的pic在技术上有一个相当大的优势，就是他的端口映射功能几乎可以随意映射，就是随意一个gpio，你可以把他随意映射成任何一种功能，比如可以是gpio，可以是usart1也可以是usart2，也可以是spi，可以是can等等，这就给硬件电路的设计上提供了极大的便利性。今天的arm架构的单片机，也可以映射，但是只能是指定的功能映射，相比pic就存在一定的局限性。

然后一直用stm32好多年，不曾换过，中间想过要提升一下，多学习点东西，于是就琢磨着学习一下嵌入式Linux的开发。在学习Linux的过程中，业内有句话叫做：“从入门到放弃”，学习的过程是非常痛苦的，尤其是如果还没个老师带带你，全靠你瞎琢磨，所以我的学习过程基本上也是学一段放弃一段最后彻底放弃不学了。

## 一个项目经历带来的思考

直到2019年做一个项目，要用一款国产的arm9芯片做一个产品，被逼到份上不学不行了，只要硬着头皮上了。

这个项目，从零开始， 边学边做，甚至为此买了新电脑装ubuntu，用了四个多月的时间，每天凌晨之前没睡过觉，慢慢熬，终于把产品给做出来了。虽然产品是做出来了，但是总结下来有以下问题：

1. 由于没正经在科班或者培训班学过这一套，导致对知识体系的理解存在很大偏差，摸索的时间过长
2. 买了不少书籍回家看，发现大多数书籍都是粗制滥造或者不适合初学者，云里雾里看不明白，有些技术或者生产力工具都太老了，所以整个看书的过程我是边看边放弃
3. 国产的arm芯片，在资料上、技术支持上太弱了，由于我接手的第一个项目就要用国产芯片，那个过程之痛苦更是加倍，几欲放弃
4. 项目做完了，产品出来了，但是仍然对整套知识不成体系，大脑里边还只是只言片语拼凑起来的概念

鉴于这些问题，我决定重新系统学习一下嵌入式Linux的知识体系，边学边做笔记，笔记的内容会是一些体系的、指引性的和需要特别学习性的东西，对于一些比较普通的应知应会的知识可能记录少一些或者进记录一些参考文献供学习参考，也就是，笔记全是干货。

学习的起点是找一个开发板，一点点啃，这比较符合单片机系统从业人员的一些思路，因为我在这个过程中发现搞嵌入式Linux和搞单片机存在较大的思维模式上的差别，刚接触的时候十分不适应，老是用单片机的那一套模式往上套。这个东西很难避免，所以如果能有个过度的过程会更好适应一下。

开发板的选择上就选用了I.MX6UL开发板，这款arm芯片几乎类似于stm32H7系列，对于搞单片机出身的人来说，可能更容易入手一些，而且网上的资料特别多，比较容易学习。操作系统如果你接触过RT-Thread的话，可能会帮助你理解Linux。

## 知识体系

在整套知识体系里边，大概包括以下需要学习的东西

1. 一套开发用的操作系统，一般就是vmware+ubuntu的组合，大多数资料的介绍停留在ubuntu16甚至14版本，实际我在19年做开发的时候就直接上了ubuntu18，不过由于liunux系统各版本兼容性的问题，光在搞系统和装各种软件上就走了不少弯路，直接用培训资料介绍的16版本可能更容易上手一些。
2. 学习简单的shell命令，现代ubuntu系统实际上大多数操作都已经可以可视化操作了，跟windows差不多，但是学习shell命令仍然是必须要的，只不过不要那么沉迷要把这些命令背的滚瓜烂熟，实际常用的也就那几个，甚至不用记忆，在学习和工作过程中那是越用越熟练，有些比较长的或者用得少的命令更不用背，要用的时候直接复制粘贴修改一下都可以。
3. 然后是Linux下的编程，这部分要了解交叉编译的原理，学习一点简单的Makefile语法。开发环境的话跟着一些教程学习安装编译器，几个简单的编译命令就差不多了，有人说Linux下没有集成开发环境（IDE），所以只能用编辑器编辑代码，再用shell敲命令编译，甚至很多教程只讲经典的VIM编辑器，要学很多VIM命令，这是不对的，而且是效率低下的。如果说编辑器，在Linux下我们可以用vscode，组织大型的工程项目非常高效，或者我们也可以用eclipse，这些软件都有linux版本，跟在windows下一样好用。你甚至可以一番神操作把他们搞成一个ide，跟在windows下用mdk开发一个感觉。那些只讲vim的教程或者培训显然没怎么搞过实际的产品，知识体系没更新。但是，简单的vim使用还是要会一点，太深了根本不用学，在实际工作中也根本用不到。
4. 开发过程中为了在windows和ubuntu之间的一些操作更好用一些，建议安装MobaXterm，这个东西可以搞FTP、串口、SSH……，总之在我们学习和开发过程中用到的一些工具基本都有，谁用谁知道。
5. 学几句简单的汇编，能对arm的硬件体系有个更深入的理解
6. 接下来就是整个知识体系的核心内容：uboot、Linux（kernel）、rootfs（buildroot）的移植学习，Linux驱动的开发，用户程序开发（QT），这部分将是最难和耗时最长的，要跳过的坑会很多。

整个一套下来，基本上就可以搞嵌入式Linux开发了，当然整套知识体系非常庞杂，在以后的工作中还是要变干边学。

本笔记将从一个单片机开发人员的角度记录学习嵌入式Linux开发的过程。做笔记是个好习惯，能记录重点、要点，也能审视和完善自己的知识。

从入门到精通，好好学习，共勉！

